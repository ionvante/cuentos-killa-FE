<div class="detalle-pagina">
  <div class="detalle-grid">
    <div class="imagen-skeleton" *ngIf="cargandoImagen"></div>

    <!-- Imagen del cuento -->
    <img
      class="hover-scale"
      [src]="cuento?.imagenUrl || 'assets/placeholder-cuento.jpg'"
      alt="Imagen del cuento"
      (error)="cargarImagenPlaceholder($event)"
      (load)="imagenCargada()"
       style="cursor: pointer;"
      [class.loaded]="!cargandoImagen"
    />
    </div>

    <div class="detalle-info">
      <h1>{{ cuento?.titulo }}</h1>
      <div class="autor-precio">
        <h3>Autor: {{ cuento?.autor }}</h3>
        <span class="precio">S/ {{ cuento?.precio | number:'1.2-2' }}</span>
      </div>
      <p class="stock" *ngIf="cuento" [ngClass]="{ 'low-stock': cuento.stock <= 3 && cuento.habilitado }">
        <ng-container *ngIf="cuento.habilitado; else sinStock">
          Quedan {{ cuento.stock }} unidades
        </ng-container>
        <ng-template #sinStock>Sin stock</ng-template>
      </p>

      <p class="descripcion">{{ cuento?.descripcionCorta }}</p>

      <div class="acciones">
        <button class="boton-dorado hover-scale" (click)="agregarAlCarrito(); $event.stopPropagation()" [disabled]="!cuento?.habilitado">
          Agregar al carrito
        </button>
        <button class="boton-volver hover-scale" (click)="volver(); $event.stopPropagation()">Volver</button>
      </div>

      <div class="extra-info">
        <p><strong>Editorial:</strong> {{ cuento?.editorial }}</p>
        <p><strong>Tipo de Edición:</strong> {{ cuento?.tipoEdicion }}</p>
        <p><strong>Páginas:</strong> {{ cuento?.nroPaginas }}</p>
        <p><strong>Publicado en:</strong> {{ cuento?.fechaPublicacion | date }}</p>
        <p><strong>Edad Recomendada:</strong> {{ cuento?.edadRecomendada }}</p>
      </div>
    </div>
</div>