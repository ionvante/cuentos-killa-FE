<div class="dashboard-content">
  <h2>Bienvenido, Admin!</h2>

  <img src="/assets/libros_killa.png" appLazyLoad="assets/libros_killa.png" alt="Banner" class="dashboard-banner" />

  <div *ngIf="errorMensaje" class="error-mensaje">
    <p>{{ errorMensaje }}</p>
    <button (click)="onRangeChange()">Reintentar</button>
  </div>

  <select [(ngModel)]="selectedDays" (change)="onRangeChange()">
    <option [value]="7">Últimos 7 días</option>
    <option [value]="30">Últimos 30 días</option>
    <option [value]="90">Últimos 90 días</option>
    <option [value]="'12m'">Últimos 12 meses</option>
  </select>

  <section class="stats-grid" aria-labelledby="stats-heading">
    <h3 id="stats-heading" class="visually-hidden">Estadísticas</h3>

    <ng-container *ngIf="isLoading">
      <div class="stat-card skeleton" *ngFor="let s of [1,2,3]"></div>
    </ng-container>

    <ng-container *ngIf="!isLoading && !errorMensaje">
      <app-stat-card [title]="'Cuentos publicados'" [value]="cuentosPublicados" [data]="cuentosData" [options]="sparklineOptions"></app-stat-card>
      <app-stat-card [title]="'Pedidos en proceso'" [value]="pedidosEnProceso" [data]="pedidosData" [options]="sparklineOptions"></app-stat-card>
      <app-stat-card [title]="'Usuarios registrados'" [value]="usuariosRegistrados" [data]="usuariosData" [options]="sparklineOptions"></app-stat-card>
    </ng-container>
  </section>

  <section class="users-section" *ngIf="!isLoading && !errorMensaje">
    <h3>Usuarios registrados</h3>
    <div class="users-grid">
      <div class="user-card" *ngFor="let user of usuarios">
        <p class="user-name">{{ user.nombre }} {{ user.apellido }}</p>
        <p class="user-email">{{ user.email }}</p>
        <p class="user-phone">{{ user.telefono }}</p>
        <p class="user-role">{{ user.role }}</p>
      </div>
    </div>
  </section>
</div>
