<div class="cuento-card">
  <span class="badge" *ngIf="isNuevo">Nuevo</span>
  <div class="image-wrapper">
    <img [src]="cuento.imagenUrl || 'assets/placeholder-cuento.jpg'" alt="{{cuento.titulo}}" loading="lazy" (load)="imagenCargada()" (error)="cargarImagenPlaceholder($event)">
    <div class="image-placeholder" *ngIf="cargandoImagen"></div>
  </div>
  <h3>{{ cuento.titulo }}</h3>
  <p>{{ cuento.autor }}</p>
  <p>S/ {{ cuento.precio | number:'1.2-2' }}</p>
  <p>Agregado: {{ cuento.fechaIngreso | date:'shortDate' }}</p>

  <div class="acciones">
    <button (click)="verDetalle()">Ver detalle</button>
    <button *ngIf="!isAdmin" (click)="agregarAlCarrito()">Agregar al carrito</button>
    <ng-container *ngIf="isAdmin">
      <button (click)="editarCuento()" class="admin-button editar">Editar</button>
      <button (click)="deshabilitarCuento()" class="admin-button deshabilitar">Deshabilitar</button>
    </ng-container>
  </div>
  <div class="share-buttons">
    <button aria-label="Compartir por WhatsApp" (click)="compartir('whatsapp')">
      <img src="assets/whatsapp.svg" alt="WhatsApp">
    </button>
    <button aria-label="Compartir por Instagram" (click)="compartir('instagram')">
      <img src="assets/instagram.svg" alt="Instagram">
    </button>
  </div>
</div>