<div class="cuento-card">
  <span class="badge" *ngIf="badgeLabel">{{ badgeLabel }}</span>
  <div class="image-wrapper">
    <img #cardImg class="hover-scale" [appLazyLoad]="cuento.imagenUrl || 'assets/placeholder-cuento.jpg'" alt="{{cuento.titulo}}" (load)="imagenCargada()" (error)="cargarImagenPlaceholder($event)">
    <div class="image-placeholder" *ngIf="cargandoImagen"></div>
  </div>
  <h3>Titulo: {{ cuento.titulo }}</h3>
  <p>Autor: {{ cuento.autor }}</p>
  <p>Precio: S/ {{ cuento.precio | number:'1.2-2' }}</p>
  <p>Agregado el {{ cuento.fechaIngreso | date:'MM-yyyy' }}</p>

  <div class="acciones">
    <button class="hover-scale" (click)="verDetalle()">Ver detalle</button>
    <button *ngIf="!isAdmin && cuento.habilitado" class="hover-scale" (click)="agregarAlCarrito()" [appFlyToCart]="cardImg">Agregar al carrito</button>
    <ng-container *ngIf="isAdmin">
      <button (click)="editarCuento()" class="admin-button editar hover-scale">Editar</button>
      <button (click)="deshabilitarCuento()" class="admin-button deshabilitar hover-scale">{{ cuento.habilitado ? 'Deshabilitar' : 'Habilitar' }}</button>
    </ng-container>
  </div>
  <div class="share-buttons">
    <button class="hover-scale" aria-label="Compartir por WhatsApp" (click)="compartir('whatsapp')">
      <img appLazyLoad="assets/whatsapp.svg" alt="WhatsApp">
    </button>
    <button class="hover-scale" aria-label="Compartir por Instagram" (click)="compartir('instagram')">
      <img appLazyLoad="assets/instagram.svg" alt="Instagram">
    </button>
  </div>
</div>