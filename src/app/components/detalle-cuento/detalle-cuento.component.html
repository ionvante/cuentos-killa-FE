<div class="detalle-pagina">
  <div class="detalle-grid">
    <div class="imagen-skeleton" *ngIf="cargandoImagen"></div>

    <!-- Imagen del cuento -->
    <img 
      [src]="cuento?.imagenUrl || 'assets/placeholder-cuento.jpg'" 
      alt="Imagen del cuento"
      (error)="cargarImagenPlaceholder($event)"
      (load)="imagenCargada()"
       style="cursor: pointer;"
      [class.loaded]="!cargandoImagen"
    />
    </div>

    <div class="detalle-info">
      <h1>{{ cuento?.titulo }}</h1>
      <div class="autor-precio">
        <h3>Autor: {{ cuento?.autor }}</h3>
        <span class="precio">S/ {{ cuento?.precio | number:'1.2-2' }}</span>
      </div>
      <p class="stock">Stock: {{ cuento?.habilitado ? cuento?.stock : 'Sin stock' }}</p>

      <p class="sinopsis" [class.expand]="mostrarSinopsisCompleta">{{ cuento?.descripcionCorta }}</p>
      <button *ngIf="!mostrarSinopsisCompleta" class="leer-mas" (click)="mostrarMasSinopsis()">Leer más</button>
      <details class="accordion">
        <summary>Ficha técnica</summary>
        <ul class="content">
          <li><strong>ISBN:</strong> {{ cuento?.isbn }}</li>
          <li><strong>Editorial:</strong> {{ cuento?.editorial }}</li>
          <li><strong>Publicado en:</strong> {{ cuento?.fechaPublicacion | date }}</li>
          <li><strong>Páginas:</strong> {{ cuento?.nroPaginas }}</li>
          <li><strong>Edad Recomendada:</strong> {{ cuento?.edadRecomendada }}</li>
        </ul>
      </details>

      <div class="acciones">
        <button class="boton-volver" (click)="volver(); $event.stopPropagation()">Volver</button>
      </div>
  </div>
  <div class="sticky-cta" *ngIf="cuento">
    <span class="price">S/ {{ cuento?.precio | number:'1.2-2' }}</span>
    <button class="boton-dorado" (click)="agregarAlCarrito(); $event.stopPropagation()" [disabled]="!cuento?.habilitado">Añadir al carrito</button>
  </div>
</div>